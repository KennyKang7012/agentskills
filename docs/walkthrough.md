# 測試與驗證指南 (Walkthrough)

本指南將引導您如何測試與驗證新開發的 FA 報告優化系統。

## 1. 準備工作與啟動伺服器

### 步驟 1：配置環境變數
請確保您已建立 `.env` 檔案並正確設定 `OPENAI_API_KEY` 與 `SKILL_PATH`：
```bash
cp .env.example .env
# 編輯 .env 填入金鑰與技能路徑
```

### 步驟 2：執行啟動指令
請確保您在專案根目錄下，執行以下指令：

```bash
# 設定 PYTHONPATH 以確保模組讀取正確
export PYTHONPATH=$PYTHONPATH:.
uv run app/main.py
```

伺服器啟動後，請開啟瀏覽器並訪問：
[http://localhost:8000](http://localhost:8000)

## 2. 驗證步驟

### 步驟 A：前端介面測試
1. **載入驗證**: 確認網頁是否正確顯示「FA Report Improvement」標題，且具備現代化的雙區域上傳設計。
2. **樣式檢查**: 確認是否有深色背景、紫色漸層標題以及整齊的卡片佈局。

### 步驟 B：雙檔案上傳驗證
1. 準備一個樣本 `.pptx` 或 `.ppt` 檔案，以及一個評核 JSON 檔案。
2. **選擇檔案**: 分別點擊兩個按鈕上傳對應檔案。
3. **按鈕狀態**: 確認只有當兩個檔案都選擇後，「開始優化報告」按鈕才由灰色變為紫色。
4. **提交測試**: 點擊按鈕，觀察下方的「正在分析並優化報告...」狀態與動畫。

### 步驟 C：API 功能驗證 (手動測試)
您可以透過 `curl` 測試 API 是否正常接收雙檔案：

```bash
curl -X POST \
  -F "report=@/path/to/report.pptx" \
  -F "evaluation_json=@/path/to/eval.json" \
  http://localhost:8000/api/upload
```

### 步驟 D：下載功能驗證
1. 待優化完成後，點擊頁面上的「下載優化後的報告」按鈕。
2. 確認是否成功下載檔名開頭為 `improved_` 的檔案。

## 3. 預期結果
- 後端終端機應顯示處理進度。
- `uploads/` 資料夾中應出現原始上傳檔案與處理後的輸出檔案。
- 前端應提供正確的下載連結。

## 4. 常見問題排除
- **連接拒絕**: 檢查 8000 端口是否被佔用。
- **模組錯誤**: 確保已執行 `export PYTHONPATH=.`。
